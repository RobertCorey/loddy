<span *ngIf="$game | async as rawGame; else loading">
  <span *ngIf="rawGame.status === 'LOBBY'">
    <app-join-game-form
      *ngIf="!hasPlayerJoined; else lobby"
    ></app-join-game-form>
    <ng-template #lobby>
      Lobby
      <app-player-list [players]="rawGame.players"></app-player-list>
      <button *ngIf="canPlayerStartGame" class="button" (click)="startLobby()">
        Start Game
      </button>
    </ng-template>
    {{ rawGame.status }}
    {{ rawGame | json }}
  </span>
  <span *ngIf="rawGame.status === 'BRAIN_QUESTIONS'">
    let's brain up gamers!
    <app-answer-brain-questions></app-answer-brain-questions>
  </span>
  <span *ngIf="rawGame.status === 'GAME_LOOP'">
    How did
    <strong>{{ game.getPlayerById(currentQuestion.brainId).name }}</strong>
    answer:
    <br />
    "{{ currentQuestion.text }}"
    <span *ngIf="localPlayerIsBrain; else notBrain">
      <br />
      You answered this question as the brain so you don't do anything this
      round. that's boring. all games have boring parts
    </span>
    <ng-template #notBrain>
      <app-answer-question-form
        [questions]="[currentQuestion]"
        [playerId]="localPlayer.id"
        (answerEmitter)="addAnswers($event)"
      ></app-answer-question-form>
    </ng-template>
    <br />
    <span>
      <table class="table">
        <tr>
          <th>Players Yet To Answer</th>
        </tr>
        <tr *ngFor="let player of game.getPlayersYetToAnswerQuestion()">
          <td>
            {{ player.name }}
          </td>
        </tr>
      </table>
    </span>
  </span>
</span>

<ng-template #loading>
  Loading...
</ng-template>
